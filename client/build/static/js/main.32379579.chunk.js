(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,a,t){e.exports=t(185)},124:function(e,a,t){},158:function(e,a){},185:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(9),c=t.n(r),o=(t(124),t(41)),i=t(12),s=(t(76),t(18)),u=t(238),m=t(219);var d=function(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],r=a[1];return l.a.createElement("div",{className:"home-container"},l.a.createElement("div",{className:"home-header"},l.a.createElement("h1",null,"SyncVid"),l.a.createElement("span",null,"Watch online videos with your friends!")),l.a.createElement("div",{className:"room-selection"},l.a.createElement("span",{className:"room-selection-text"},"Enter Channel"),l.a.createElement(u.a,{className:"room-name-input",value:t,onChange:function(e){r(e.target.value)}}),l.a.createElement(o.b,{to:"r/".concat(t),className:"enter-room-button"},l.a.createElement(m.a,null,"Join Room"))))},p=t(106),E=t(35),b=t(105),v=t(20),f=t(102),h=t.n(f),y=t(103),O=t.n(y),g=t(104),j=t.n(g),N=t(220),w=t(221),_=t(222),k=t(223),C=t(225),S=t(226),x=t(227),I=t(242),P=t(187),J=t(241),M=t(230),R=t(218),W=t(215),B=t(236),D=t(240),F=t(224),U=t(228),V=t(229),q=t(231),A=t(232),G=t(233),K=t(234),T=t(235),H=t(237),$=t(24),z=t(72),L=t.n(z),Q=h()({transports:["websocket"],upgrade:!1});function X(e){var a=e.children,t=e.value,n=e.index,r=Object(p.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},r),t===n&&l.a.createElement(D.a,{p:3},a))}function Y(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var Z=function(e){var a,t=e.match.params.roomName,c=Object($.a)(),i=Object(n.useRef)(null),m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),y=Object(s.a)(h,2),g=y[0],D=y[1],z=Object(n.useState)(""),Z=Object(s.a)(z,2),ee=Z[0],ae=Z[1],te=Object(n.useState)(""),ne=Object(s.a)(te,2),le=ne[0],re=ne[1],ce=Object(n.useState)(""),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(n.useState)([]),me=Object(s.a)(ue,2),de=me[0],pe=me[1],Ee=Object(n.useState)(0),be=Object(s.a)(Ee,2),ve=be[0],fe=be[1],he=Object(n.useState)(""),ye=Object(s.a)(he,2),Oe=ye[0],ge=ye[1],je=Object(n.useState)([]),Ne=Object(s.a)(je,2),we=Ne[0],_e=Ne[1],ke=Object(n.useState)({url:null,playing:!0,volume:.3,played:0,loaded:0,duration:0,playbackRate:1,loop:!1}),Ce=Object(s.a)(ke,2),Se=Ce[0],xe=Ce[1],Ie=Object(n.useState)([]),Pe=Object(s.a)(Ie,2),Je=Pe[0],Me=Pe[1];Object(n.useEffect)((function(){return Q.emit("JOIN_ROOM",t),Q.on("INCOMING_MESSAGE",(function(e){var a=Object(v.a)(Object(v.a)({},e),{},{sentByCurrentUser:e.sender.username===p});pe((function(e){return[].concat(Object(b.a)(e),[a])}))})),Q.on("get_users",(function(e){Me(e)})),Q.on("user_info",(function(e){f(e.username),D(e.username),ae(e.color),e.role!==le&&(Q.emit("change_role",e.role),re(e.role))})),Q.on("get_playlist",(function(e){_e(e)})),Q.on("change_current_video",(function(e){xe(Object(v.a)(Object(v.a)({},Se),{},{url:e}))})),Q.on("current_video_request",(function(e){var a={user:e,url:i.current.props.url,played:i.current.getCurrentTime()};Q.emit("current_video_prop",a)})),Q.on("update_video",(function(e){xe(Object(v.a)(Object(v.a)({},Se),{},{url:e.url,played:e.played,playing:!0})),i.current.seekTo(e.played)})),function(){Q.disconnect()}}),[t]);var Re=function(e){var a=we.splice(e,1);_e(a),Q.emit("update_playlist",we)},We=function(e){Q.emit("play_video",e)},Be=function(){var e={sender:{username:p,color:ee},message:ie,room:t};Q.emit("new_message",e),se("")};return l.a.createElement("div",{className:"root"},l.a.createElement(C.a,{position:"static"},l.a.createElement(S.a,{className:"app-header"},l.a.createElement(o.b,{className:"header-home",to:"/",edge:"start"},"SyncVid"),l.a.createElement("span",{className:"header-username",edge:"end",color:"inherit"},"Hello! ",p))),l.a.createElement(x.a,{container:!0,className:"room-container",justify:"space-between",alignItems:"stretch"},l.a.createElement(x.a,{item:!0,className:"video-container"},l.a.createElement(x.a,null,l.a.createElement(x.a,{item:!0,className:"video-wrapper"},l.a.createElement(L.a,(a={ref:i,className:"react-player",id:"streaming-player",playing:Se.playing,url:Se.url,duration:Se.duration,width:"100%",height:"75vh",volume:Se.volume},Object(E.a)(a,"playing",Se.playing),Object(E.a)(a,"onEnded",(function(){Q.emit("play_video",0)})),Object(E.a)(a,"onProgress",(function(e){xe(Object(v.a)(Object(v.a)({},Se),{},{played:parseFloat(e.played),playing:!0}))})),Object(E.a)(a,"onPause",(function(){xe(Object(v.a)(Object(v.a)({},Se),{},{playing:!i.current.props.playing}))})),a))),l.a.createElement(x.a,{item:!0,className:"common-toolbar"},l.a.createElement(U.a,null),l.a.createElement(I.a,{className:"volume-slider",defaultValue:30,onChange:function(e,a){xe(Object(v.a)(Object(v.a)({},Se),{},{volume:parseFloat(a)/100}))},"aria-labelledby":"continuous-slider"}),l.a.createElement(k.a,{color:"default",onClick:function(){O.a.request(Object(r.findDOMNode)(i.current))}},l.a.createElement(V.a,null))),l.a.createElement(x.a,{item:!0,className:"admin-toolbar",hidden:"admin"!==le},l.a.createElement(I.a,{className:"video-seek-slider",value:100*Se.played,onChange:function(e,a){var t={user:"all",url:i.current.props.url,played:parseFloat(a)/100};Q.emit("current_video_prop",t)}})))),l.a.createElement(x.a,{item:!0,className:"user-control"},l.a.createElement(P.a,{className:"user-control-container",elevation:1},l.a.createElement(C.a,{position:"static",color:"default",elevation:1},l.a.createElement(J.a,{value:ve,onChange:function(e,a){fe(a)},indicatorColor:"primary",variant:"fullWidth","aria-label":"user-control-tabs"},l.a.createElement(M.a,Object.assign({icon:l.a.createElement(q.a,null),"aria-label":"playlist-container"},Y(0))),l.a.createElement(M.a,Object.assign({icon:l.a.createElement(A.a,null),"aria-label":"chat-container"},Y(1))),l.a.createElement(M.a,Object.assign({icon:l.a.createElement(G.a,null),"aria-label":"userlist-container"},Y(2))))),l.a.createElement(j.a,{axis:"rtl"===c.direction?"x-reverse":"x",index:ve,onChangeIndex:function(e){fe(e)},className:"user-control-content"},l.a.createElement(X,{value:ve,index:0,className:"playlist-container"},l.a.createElement(S.a,{hidden:"admin"!==le,className:"add-new-video"},l.a.createElement("input",{className:"new-video-url",placeholder:"url...",value:Oe,onChange:function(e){ge(e.target.value)}}),l.a.createElement(k.a,{color:"default",onClick:function(){if(L.a.canPlay(Oe)){var e=!1;""!==Se.url&&null!==Se.url&&(e=!0);var a={url:Oe,isPlaying:e};Q.emit("add_new_video",a),ge("")}else alert("this is not a valid link")}},l.a.createElement(K.a,null))),l.a.createElement("span",{className:"now-playing"}," Now Playing ",l.a.createElement("span",{className:"currentUrl"},Se.url)," "),l.a.createElement(R.a,{dense:!0,className:"current-playlist"},"admin"===le?we.map((function(e,a){return l.a.createElement(N.a,{key:a,onClick:We.bind(null,a),button:!0},l.a.createElement(w.a,{primary:e}),l.a.createElement(_.a,null,l.a.createElement(k.a,{edge:"end",color:"secondary","aria-label":"delete",onClick:Re.bind(null,a)},l.a.createElement(F.a,null))))})):we.map((function(e,a){return l.a.createElement(N.a,{key:a},l.a.createElement(w.a,{primary:e}))})))),l.a.createElement(X,{value:ve,index:1,className:"chat-container"},l.a.createElement(R.a,{dense:!0,className:"chat-message-list"},de.map((function(e,a){var t=e.sender,n=e.message;return l.a.createElement(N.a,{className:"message-item",key:a},l.a.createElement("span",{className:"sender",style:{color:t.color}},t.username),l.a.createElement("span",{className:"message"},n))}))),l.a.createElement(S.a,{className:"chat-user-input"},l.a.createElement(u.a,{className:"username-input",value:ie,onKeyDown:function(e){"Enter"===e.key&&Be()},onChange:function(e){se(e.target.value)}}),l.a.createElement(k.a,{color:"primary",onClick:Be},l.a.createElement(T.a,null)))),l.a.createElement(X,{value:ve,index:2,className:"userlist-container"},l.a.createElement("div",{className:"username-setting"},l.a.createElement(W.a,{className:"username-input",value:g,onChange:function(e){D(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&Q.emit("change_username",g)},disableUnderline:!0,startAdornment:l.a.createElement(B.a,{position:"start"},l.a.createElement(H.a,null))})),l.a.createElement(R.a,{dense:!0,className:"connected-users"},Je.map((function(e,a){return l.a.createElement(N.a,{key:a},l.a.createElement("span",{style:{color:e.color}}," ",e.username))})))))))),l.a.createElement("footer",null))},ee=function(){return l.a.createElement(o.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:d}),l.a.createElement(i.a,{exact:!0,path:"/r/:roomName",component:Z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,a,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.32379579.chunk.js.map