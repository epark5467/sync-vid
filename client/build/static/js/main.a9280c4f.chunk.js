(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,a,t){e.exports=t(183)},122:function(e,a,t){},156:function(e,a){},183:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(9),c=t.n(r),o=(t(122),t(41)),i=t(12),s=(t(75),t(18)),u=t(214),m=t(237),d=t(219);var p=function(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],r=a[1];return l.a.createElement("div",{className:"home-container"},l.a.createElement("h2",null,"Youtube Sync"),l.a.createElement("span",null,"Watch Youtube videos with your friends!"),l.a.createElement(u.a,null),l.a.createElement("div",{className:"room-selection"},l.a.createElement("span",null,"Enter Channel"),l.a.createElement(m.a,{className:"room-name-input",value:t,onChange:function(e){r(e.target.value)}}),l.a.createElement(o.b,{to:"r/".concat(t),className:"enter-room-button"},l.a.createElement(d.a,null,"Join Room"))))},E=t(105),b=t(35),v=t(104),f=t(20),O=t(101),g=t.n(O),h=t(102),y=t.n(h),j=t(103),N=t.n(j),w=t(220),_=t(241),k=t(221),C=t(222),S=t(224),x=t(225),I=t(226),P=t(242),J=t(185),M=t(240),R=t(229),W=t(218),B=t(217),F=t(239),U=t(223),q=t(227),G=t(228),T=t(230),V=t(231),Y=t(232),A=t(233),D=t(234),H=t(235),$=t(236),z=t(24),K=t(71),L=t.n(K),Q=g()({transports:["websocket"],upgrade:!1});function X(e){var a=e.children,t=e.value,n=e.index,r=Object(E.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},r),t===n&&l.a.createElement(F.a,{p:3},a))}function Z(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var ee=function(e){var a,t=e.match.params.roomName,c=Object(z.a)(),i=Object(n.useRef)(null),u=Object(n.useState)(""),d=Object(s.a)(u,2),p=d[0],E=d[1],O=Object(n.useState)(""),g=Object(s.a)(O,2),h=g[0],j=g[1],F=Object(n.useState)(""),K=Object(s.a)(F,2),ee=K[0],ae=K[1],te=Object(n.useState)(""),ne=Object(s.a)(te,2),le=ne[0],re=ne[1],ce=Object(n.useState)(""),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(n.useState)([]),me=Object(s.a)(ue,2),de=me[0],pe=me[1],Ee=Object(n.useState)(0),be=Object(s.a)(Ee,2),ve=be[0],fe=be[1],Oe=Object(n.useState)(""),ge=Object(s.a)(Oe,2),he=ge[0],ye=ge[1],je=Object(n.useState)([]),Ne=Object(s.a)(je,2),we=Ne[0],_e=Ne[1],ke=Object(n.useState)({url:null,playing:!0,volume:.3,played:0,loaded:0,duration:0,playbackRate:1,loop:!1}),Ce=Object(s.a)(ke,2),Se=Ce[0],xe=Ce[1],Ie=Object(n.useState)([]),Pe=Object(s.a)(Ie,2),Je=Pe[0],Me=Pe[1],Re=Object(n.useState)(!1),We=Object(s.a)(Re,2);We[0],We[1];Object(n.useEffect)((function(){return Q.emit("JOIN_ROOM",t),Q.on("INCOMING_MESSAGE",(function(e){var a=Object(f.a)(Object(f.a)({},e),{},{sentByCurrentUser:e.sender.username===p});pe((function(e){return[].concat(Object(v.a)(e),[a])}))})),Q.on("get_users",(function(e){Me(e)})),Q.on("user_info",(function(e){E(e.username),j(e.username),ae(e.color),e.role!==le&&(Q.emit("change_role",e.role),re(e.role))})),Q.on("get_playlist",(function(e){_e(e)})),Q.on("change_current_video",(function(e){xe(Object(f.a)(Object(f.a)({},Se),{},{url:e}))})),Q.on("current_video_request",(function(e){var a={user:e,url:i.current.props.url,played:i.current.getCurrentTime()};Q.emit("current_video_prop",a)})),Q.on("update_video",(function(e){xe(Object(f.a)(Object(f.a)({},Se),{},{url:e.url,played:e.played,playing:!0})),i.current.seekTo(e.played),console.log(e.played,e.played/100)})),function(){Q.disconnect()}}),[t]);var Be=function(e){var a=we.splice(e,1);_e(a),Q.emit("update_playlist",we)},Fe=function(e){Q.emit("play_video",e)};return l.a.createElement("div",{className:"root"},l.a.createElement(S.a,{position:"static"},l.a.createElement(x.a,{className:"app-header"},l.a.createElement(o.b,{className:"header-home",to:"/",edge:"start"},"SyncVid"),l.a.createElement("span",{className:"header-username",edge:"end",color:"inherit"},"Hello! ",p))),l.a.createElement(I.a,{container:!0,className:"room-container",justify:"space-between",alignItems:"stretch"},l.a.createElement(I.a,{item:!0,className:"video-container"},l.a.createElement(I.a,null,l.a.createElement(I.a,{item:!0,className:"video-wrapper"},l.a.createElement(L.a,(a={ref:i,className:"react-player",id:"streaming-player",playing:Se.playing,url:Se.url,duration:Se.duration,width:"100%",height:"70vh",volume:Se.volume},Object(b.a)(a,"playing",Se.playing),Object(b.a)(a,"onEnded",(function(){Q.emit("play_video",0)})),Object(b.a)(a,"onProgress",(function(e){xe(Object(f.a)(Object(f.a)({},Se),{},{played:parseFloat(e.played),playing:!0}))})),Object(b.a)(a,"onPause",(function(){xe(Object(f.a)(Object(f.a)({},Se),{},{playing:!i.current.props.playing}))})),a))),l.a.createElement(I.a,{item:!0,className:"common-toolbar"},l.a.createElement(q.a,null),l.a.createElement(P.a,{className:"volume-slider",defaultValue:30,onChange:function(e,a){xe(Object(f.a)(Object(f.a)({},Se),{},{volume:parseFloat(a)/100}))},"aria-labelledby":"continuous-slider"}),l.a.createElement(C.a,{color:"default",onClick:function(){y.a.request(Object(r.findDOMNode)(i.current))}},l.a.createElement(G.a,null))),l.a.createElement(I.a,{item:!0,className:"admin-toolbar",hidden:"admin"!==le},l.a.createElement(P.a,{className:"video-seek-slider",value:100*Se.played,onChange:function(e,a){var t={user:"all",url:i.current.props.url,played:parseFloat(a)/100};Q.emit("current_video_prop",t)}})))),l.a.createElement(I.a,{item:!0,className:"user-control"},l.a.createElement(J.a,{className:"user-control-container",elevation:1},l.a.createElement(S.a,{position:"static",color:"default",elevation:1},l.a.createElement(M.a,{value:ve,onChange:function(e,a){fe(a)},indicatorColor:"primary",variant:"fullWidth","aria-label":"user-control-tabs"},l.a.createElement(R.a,Object.assign({icon:l.a.createElement(T.a,null),"aria-label":"playlist-container"},Z(0))),l.a.createElement(R.a,Object.assign({icon:l.a.createElement(V.a,null),"aria-label":"chat-container"},Z(1))),l.a.createElement(R.a,Object.assign({icon:l.a.createElement(Y.a,null),"aria-label":"userlist-container"},Z(2))))),l.a.createElement(N.a,{axis:"rtl"===c.direction?"x-reverse":"x",index:ve,onChangeIndex:function(e){fe(e)},className:"user-control-content"},l.a.createElement(X,{value:ve,index:0,className:"playlist-container"},l.a.createElement(x.a,{hidden:"admin"!==le,className:"add-new-video"},l.a.createElement("input",{className:"new-video-url",placeholder:"url...",value:he,onChange:function(e){ye(e.target.value)}}),l.a.createElement(C.a,{color:"default",onClick:function(){if(L.a.canPlay(he)){var e=!1;""!==Se.url&&null!==Se.url&&(e=!0);var a={url:he,isPlaying:e};Q.emit("add_new_video",a),ye("")}else alert("this is not a valid link")}},l.a.createElement(A.a,null))),l.a.createElement("span",{className:"now-playing"}," Now Playing ",l.a.createElement("span",{className:"currentUrl"},Se.url)," "),l.a.createElement(W.a,{dense:!0,className:"current-playlist"},"admin"===le?we.map((function(e,a){return l.a.createElement(w.a,{key:a,onClick:Fe.bind(null,a),button:!0},l.a.createElement(_.a,{primary:e}),l.a.createElement(k.a,null,l.a.createElement(C.a,{edge:"end",color:"secondary","aria-label":"delete",onClick:Be.bind(null,a)},l.a.createElement(U.a,null))))})):we.map((function(e,a){return l.a.createElement(w.a,{key:a},l.a.createElement(_.a,{primary:e}))})))),l.a.createElement(X,{value:ve,index:1,className:"chat-container"},l.a.createElement(W.a,{dense:!0,className:"chat-message-list"},de.map((function(e,a){var t=e.sender,n=e.message;return l.a.createElement(w.a,{className:"message-item",key:a},l.a.createElement("span",{className:"sender",style:{color:t.color}},t.username),l.a.createElement("span",{className:"message"},n))}))),l.a.createElement(x.a,{className:"chat-user-input"},l.a.createElement(m.a,{className:"username-input",value:ie,onChange:function(e){se(e.target.value)}}),l.a.createElement(C.a,{color:"primary",onClick:function(){var e={sender:{username:p,color:ee},message:ie,room:t};Q.emit("new_message",e),se("")}},l.a.createElement(D.a,null)))),l.a.createElement(X,{value:ve,index:2,className:"userlist-container"},l.a.createElement("div",null,l.a.createElement("div",{className:"username-setting"},l.a.createElement("span",null,"Username:"),l.a.createElement(B.a,{value:h,onChange:function(e){j(e.target.value)}}),l.a.createElement(C.a,{color:"primary",onClick:function(){Q.emit("change_username",h)}},l.a.createElement(H.a,null))),l.a.createElement(W.a,{dense:!0,className:"connected-users"},Je.map((function(e,a){return l.a.createElement(w.a,{key:a},l.a.createElement("span",{style:{color:e.color}}," ",e.username))}))))))))),l.a.createElement("footer",null,l.a.createElement(C.a,{color:"default"},l.a.createElement($.a,null))))},ae=function(){return l.a.createElement(o.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:p}),l.a.createElement(i.a,{exact:!0,path:"/r/:roomName",component:ee})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,a,t){}},[[117,1,2]]]);
//# sourceMappingURL=main.a9280c4f.chunk.js.map